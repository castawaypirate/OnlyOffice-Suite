<div class="editor-page">
  <div class="editor-header">
    <button class="back-btn" (click)="goBack()" [disabled]="isSaving">
      ← Back to Files
    </button>
    <button class="save-close-btn" (click)="saveAndClose()" [disabled]="hasUncommittedChanges || isSaving">
      💾 Save & Close
    </button>
    <h2>{{ fileName }}</h2>
  </div>

  <div class="editor-container" *ngIf="config && editorKey" [attr.data-editor-key]="editorKey">
    <document-editor
      id="docEditor"
      [documentServerUrl]="documentServerUrl"
      [config]="config"
      style="height: 800px; width: 100%;">
    </document-editor>
  </div>

  <div *ngIf="!config" class="loading">
    Loading document...
  </div>

  <!-- Loading overlay for save operation -->
  <div *ngIf="isSaving" class="loading-overlay">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Saving document...</p>
    </div>
  </div>

  <!-- Error modal -->
  <div *ngIf="showErrorModal" class="modal-overlay" (click)="closeErrorModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h3>Error</h3>
      <p>{{ errorMessage }}</p>
      <button class="modal-btn" (click)="closeErrorModal()">OK</button>
    </div>
  </div>
</div>